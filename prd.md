# 图片字幕生成工具 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
图片字幕生成工具

### 1.2 产品定位
一个在线的图片字幕生成工具，用户可以上传图片并添加自定义字幕，生成带有字幕的图片。

### 1.3 目标用户
- 内容创作者
- 社交媒体运营人员
- 设计师
- 普通用户

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 图片上传功能
- **功能描述**: 用户可以上传本地图片文件
- **交互方式**: 点击"选择图片"按钮或拖拽上传
- **支持格式**: JPG, PNG, GIF, WEBP
- **文件大小限制**: 最大10MB
- **显示**: 上传后显示文件名（如：1040g008318f94u90k66g5pashg241h3nhigv08.png）

#### 2.1.2 字幕设置功能

##### 字幕高度设置
- **控件类型**: 数字输入框 + 下拉选择
- **默认值**: 60px
- **可选单位**: px
- **调节范围**: 20-200px

##### 字体大小设置
- **控件类型**: 数字输入框 + 下拉选择
- **默认值**: 40px
- **可选单位**: px
- **调节范围**: 12-100px

##### 字体颜色设置
- **控件类型**: 颜色选择器
- **默认值**: #000000 (黑色)
- **显示**: 颜色块 + 十六进制色值输入框

##### 轮廓颜色设置
- **控件类型**: 颜色选择器
- **默认值**: #000000 (黑色)
- **显示**: 颜色块 + 十六进制色值输入框

##### 字体样式设置
- **控件类型**: 下拉选择框
- **默认值**: 苹方
- **可选项**: 苹方、宋体、黑体、微软雅黑等

##### 字体粗细设置
- **控件类型**: 下拉选择框
- **默认值**: 粗体
- **可选项**: 细体、正常、粗体、特粗

#### 2.1.3 字幕内容编辑
- **控件类型**: 多行文本输入框
- **功能**: 支持多行文本输入
- **示例内容**: 
  ```
  那是什么 是造成你的现在
  是那些做过大大小小的选择
  是你 宅在家里 看的每部电影
  是你 曾经默默旁观看的每个场景
  ```

#### 2.1.4 实时预览功能
- **显示区域**: 右侧预览区
- **功能特点**:
  - 实时显示字幕效果
  - 每行文字都有统一的背景条
  - 背景条呈现切割感效果
  - 文字居中显示在背景条上
  - 背景条为半透明黑色或深色

#### 2.1.5 操作按钮
- **生成字幕图片**: 主要操作按钮，蓝色背景
- **保存图片**: 次要操作按钮，灰色背景

### 2.2 界面布局

#### 2.2.1 整体布局
- **布局方式**: 左右分栏布局
- **左侧**: 功能设置区域（约40%宽度）
- **右侧**: 预览区域（约60%宽度）

#### 2.2.2 左侧设置区域
- **上传图片区域**: 顶部
- **字幕设置区域**: 中部，包含所有字幕参数设置
- **字幕内容区域**: 下部，文本输入框
- **操作按钮区域**: 底部

#### 2.2.3 右侧预览区域
- **标题**: "预览"
- **预览图片**: 显示上传的图片和字幕效果
- **背景**: 深色背景突出预览效果

## 3. 技术需求

### 3.1 前端技术栈
- **框架**: React/Vue.js
- **样式**: CSS3/SCSS
- **图片处理**: Canvas API 或 Fabric.js
- **颜色选择器**: 第三方组件库

### 3.2 核心技术实现

#### 3.2.1 图片处理
- 使用Canvas API进行图片和文字的合成
- 支持图片缩放和适配
- 文字渲染和背景条绘制

#### 3.2.2 字幕背景效果
- **背景条样式**: 半透明深色背景
- **切割感实现**: 每行文字独立的背景条
- **文字居中**: 文字在背景条中水平居中
- **行间距**: 适当的行间距保持视觉效果

#### 3.2.3 实时预览
- 监听所有设置参数的变化
- 实时重新渲染预览图片
- 防抖处理避免频繁渲染

### 3.3 文件导出
- **格式**: PNG/JPG
- **质量**: 高质量输出
- **尺寸**: 保持原图比例

## 4. 用户体验要求

### 4.1 交互体验
- **响应速度**: 参数调整后500ms内完成预览更新
- **操作反馈**: 所有操作都有明确的视觉反馈
- **错误处理**: 友好的错误提示信息

### 4.2 视觉设计
- **设计风格**: 简洁现代
- **色彩搭配**: 以蓝色为主色调
- **字体**: 系统默认字体
- **间距**: 合理的留白和间距

### 4.3 兼容性
- **浏览器**: Chrome, Firefox, Safari, Edge
- **设备**: 桌面端优先，移动端适配

## 5. 功能优先级

### P0 (必须实现)
- 图片上传功能
- 基础字幕设置（字体大小、颜色）
- 字幕内容编辑
- 实时预览
- 图片导出

### P1 (重要功能)
- 字体样式选择
- 字体粗细设置
- 轮廓颜色设置
- 字幕高度调节

### P2 (增强功能)
- 更多字体选择
- 背景透明度调节
- 字幕位置调节
- 批量处理功能

## 6. 验收标准

1. 用户能够成功上传图片并在预览区看到
2. 所有字幕设置参数都能正常调节并实时预览
3. 生成的字幕图片质量清晰，字幕效果符合设计要求
4. 每行文字都有统一的背景条，呈现切割感
5. 界面响应流畅，无明显卡顿
6. 支持主流浏览器正常使用

## 7. 后续迭代方向

- 支持更多字幕样式和效果
- 添加字幕动画效果
- 支持视频字幕生成
- 云端存储和分享功能
- 模板库功能